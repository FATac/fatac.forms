<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<head>
    <metal:block metal:fill-slot="head_slot">
        <link rel="alternate" title="RSS 1.0" type="application/rss+xml"
              tal:define="here_url context/@@plone_context_state/object_url"
              tal:condition="request/SearchableText|nothing"
              tal:attributes="href string:$here_url/search_rss?${request/QUERY_STRING}"/>
        <script type="text/javascript" src="++resource++fatac.forms.js/gestioMedias.js"></script>
        <script type="text/javascript" src="++resource++fatac.forms.js/gestioMedias.css"></script>
    </metal:block>

    <metal:block fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border',1);
                             disable_column_one python:request.set('disable_plone.leftcolumn',1);
                             disable_column_two python:request.set('disable_plone.rightcolumn',1);" />
</head>
    <body i18n:domain="fatac.forms">
    	<metal:content-title fill-slot="content-title">
            <h1 class="documentFirstHeading" i18n:translate="Administracio">Administració</h1>
        </metal:content-title>
        <metal:content-description fill-slot="content-description">
            <div class="documentDescription" i18n:translate="GestioMedia">
                Gestió de medias
            </div>
            <br/>
        </metal:content-description>
        <metal:content-core fill-slot="content-core">
        	<form name="gestioMedias" method="post">
        		<input type="text" name="search" tal:attributes="value view/getSearchText">
        		<input type="submit" value="Buscar">
        		<input type="hidden" id="actionInput" name="action">
        		<input type="hidden" id="idInput" name="id">
        		<input type="hidden" id="pagInput" name="pag">
        		<tal:def tal:define="link python: context.REQUEST.get('link')">
        			<input type="hidden" name="link" tal:attributes="value link">
        		</tal:def>
        	</form>
        	<br/>
        	<div>
        		<span>
        			<span tal:condition="view/getPagMinus1"><a href="javascript:void(0);" tal:attributes="onclick view/getPagMinus1">&lt;&lt;</a></span>
        			Pàgina&nbsp;
        			<span tal:content="view/getPag"></span>
        			<a href="javascript:void(0);" tal:attributes="onclick view/getPagPlus1">&gt;&gt;</a>
        		</span>
        	</div>
        	<table width="100%">
        		<thead><tr><td i18n:translate="Media">Media</td><td i18n:translate="Format">Format</td><td>&nbsp;</td><td>&nbsp;</td></tr></thead>
        		<tbody>
        		<tal:block tal:repeat="item view/getMediaList">
        			<tr bgcolor="#E0E0E0" tal:condition="repeat/item/odd">        			
        				<td><a target="mediaPreview" tal:attributes="href item/url" tal:content="item/id"></a></td>
        				<td tal:content="item/format"></td>
	        			<td><a tal:attributes="href item/urlDelete" i18n:translate="Esborrar">Esborrar</a></td>
	        			<td><a tal:attributes="href item/urlConvert" i18n:translate="Convertir">Convertir</a></td>
	        			<tal:def tal:define="link python: context.REQUEST.get('link')">
	        				<td tal:condition="link">
	        					<a href="javascript:void(0);" tal:attributes="onclick string:opener.mediaUrlPreview('${item/url}');;window.close();;" i18n:translate="Link">Seleccionar</a>
	        				</td>
	        			</tal:def>		
	           		</tr>
	        		<tr tal:condition="repeat/item/even">        			
        				<td><a target="mediaPreview" tal:attributes="href item/url" tal:content="item/id"></a></td>
        				<td tal:content="item/format"></td>
	        			<td><a tal:attributes="href item/urlDelete" i18n:translate="Esborrar">Esborrar</a></td>
	        			<td><a tal:attributes="href item/urlConvert" i18n:translate="Convertir">Convertir</a></td>
	        			<tal:def tal:define="link python: context.REQUEST.get('link')">
	        				<td tal:condition="link">
	        					<a href="javascript:void(0);" tal:attributes="onclick string:opener.mediaUrlPreview('${item/url}');;window.close();;" i18n:translate="Link">Seleccionar</a>
	        				</td>
	        			</tal:def>	
	        		</tr>
	        	</tal:block>
        		</tbody>
        	</table>
        	
        </metal:content-core>
    </body>
</html>